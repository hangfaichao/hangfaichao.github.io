---
title: python时序分析
date: 2019-09-05 16:51:14
tags: [python, 时序分析]
---

导师建议对论文的趋势分析做个假设检验，顺便将时序分析的技术简单了解了一下。

时序分析的一般套路如下：

![nntEAU.png](https://s2.ax1x.com/2019/09/05/nntEAU.png)

## 纯随机性检验

按照套路，首先分析序列是否是纯随机序列，如果是的话就没有分析的必要了。

```python
from statsmodels.sandbox.stats.diagnostic import acorr_ljungbox

qljungbox, pval, qboxpierce, pvalbp=acorr_ljungbox(x, boxpierce=True)
```



四个返回值分别是 LB统计量，LB统计量的p值，Q统计量，Q统计量的p值。

若p值小于显著性水平a（a=0.05），则拒绝原假设，即x不是纯随机的。

## 平稳检验

方法：单位根检验（ADF检验）

```python
from statsmodels.tsa.stattools import adfuller
r = adfuller(x)
if r[0] < r[4]['1%'] and r[1] < 0.05:
    print(topic_id, r)
```

其中返回值r的结果是个tuple，例如：

```
(-9.1916312162314355, 2.1156279593784273e-15, 12, 338, {'5%': -2.8701292813761641, '1%': -3.449846029628477, '10%': -2.5713460670144603}, 4542.1540700410897)
```

当adf值小于‘1%’并且p值小于显著性水平a（a=0.05）时，可以显著性的拒绝原假设，即数据时平稳的



## 后记：

但是用自己的数据进行假设检验时发现跟肉眼观察的直觉不太一样，很多有些看上去不像白噪声的检验结果为纯随机的，看上去并不平稳的检验结果为平稳的，不知道是数据点不够多（86个）的影响还是说直觉并不如数据来的准确。

后来发现好像都用不到啊，一个数学系的同学说用ARMR之类的预测效果都不是很好。就当纯粹记录一下吧。最后决定通过R语言的mk.test()函数进行趋势检验。

mk.test()函数的结果首先看p值是否小于0.05，若小于0.05说明显著，无法拒绝有趋势的原假设，其次看s正数还是负数，正数为增长趋势，负数为减少趋势。